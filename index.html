<!DOCTYPE html>
<html lang="en">
<head>
	<title>Contact V15</title>
	<meta charset="UTF-8">

<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
</head>
<body>
	<div class="container-contact100">
		<div class="contact100-map" id="google_map" data-map-x="40.722047" data-map-y="-73.986422" data-pin="images/icons/map-marker.png" data-scrollwhell="0" data-draggable="1"></div>

		<div class="wrap-contact100">
			<div class="contact100-form-title" style="background-image: url(images/tiquetes.jpg);">
				<span class="contact100-form-title-1">
					Añadir películas
				</span>

				<span class="contact100-form-title-2">
					Feel free to drop us a line below!
				</span>
			</div>

			<div class="contact100-form validate-form">
				<div class="wrap-input100 validate-input" data-validate="Name is required">
					<span class="label-input100">Nombre:</span>
					<input class="input100" type="text" name="name" id="Nombre" placeholder="Nombre">
					<span class="focus-input100"></span>
				</div>

				<div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
					<span class="label-input100">Duración en minutos:</span>
					<input class="input100" type="number" id="duracion" name="email" placeholder="Duración">
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input">
					<div class="label-input100" >Género</div>
					<div>
						<select id="genero" class="js-select2" name="service">
							<option>Elije el género de la película</option>
							<option>Comedia</option>
							<option>Romántica</option>
							<option>Acción</option>
							<option>Terror</option>
							<option>Drama</option>
							<option>Ficción</option>
              <option>Música</option>
						</select>
						<div class="dropDownSelect2"></div>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input">
					<div class="label-input100">Idioma original</div>
					<div>
						<select class="js-select2" id="idiomaaudio" name="service">
							<option>Elije el idioma de la película</option>
							<option>Español</option>
							<option>Inglés</option>
						</select>
						<div class="dropDownSelect2"></div>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input">
					<div class="label-input100">Subtítulos</div>
					<div>
						<select id="idiomasub" class="js-select2" name="service">
							<option>Elije el idioma de los subtítulos</option>
							<option>Español</option>
							<option>Inglés</option>
              <option>Sin subtítulos</option>
						</select>
						<div class="dropDownSelect2"></div>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Message is required">
					<span class="label-input100">Sinopsis:</span>
					<textarea id="sinopsis" class="input100" name="message" placeholder="Sinopsis"></textarea>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input">
					<div class="label-input100">Clasificación</div>
					<div>
						<select id="clasificacion" class="js-select2" name="service">
							<option>Elije la clasificación de la película</option>
							<option>Todo público</option>
							<option>+ 13</option>
							<option>+ 18</option>
						</select>
						<div class="dropDownSelect2"></div>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate="Phone is required">
					<span class="label-input100">Precio:</span>
					<input id="precio" class="input100" type="number" name="phone" placeholder="Precio">
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
					<span class="label-input100">Hora de inicio:</span>
					<input id="hora" class="input100" type="number" name="email" placeholder="Hora inicio">
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
					<span class="label-input100">Fecha:</span>
					<input id="fecha" class="input100" type="date" name="email" placeholder="Fecha">
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
					<span class="label-input100">Minuto de inicio:</span>
					<input id="minuto" class="input100" type="number" name="email" placeholder="Minuto de inicio">
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
					<span class="label-input100">Imagen:</span>
					<input id="imagen" class="input100" type="file" name="email" placeholder="Img">
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
					<span class="label-input100">Estado:</span>
					<input id="estado" class="input100" type="number" name="email" placeholder="1-0">
					<span class="focus-input100"></span>
				</div>
				<div class="container-contact100-form-btn">
					<button class="contact100-form-btn" onclick="botonguardarclick()">
						<span>
							Submit
							<i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
						</span>
					</button>
				</div>
			</div>
		</div>
	</div>
	<div id="dropDownSelect1"></div>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/daterangepicker/moment.min.js"></script>
	<script src="vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
	<script src="js/main.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-23581568-13');
	</script>

	<script>
		class _Pelicula {
   constructor(_id, 
NOMBRE,
    DURACIONMINUTOS,
    GENERO,
    IDIOMAAUDIO,
    IDIOMASUB,
    SINOPSIS,
    CLASIFICACION,
    PRECIO,
    HORAINICIO,
    FECHA,
    MINUTOINICIO,
    ASIENTOS,
    IMAGEN,
    ESTADO
            ) {
       this._id=_id;
this.NOMBRE =NOMBRE;
    this.DURACIONMINUTOS=DURACIONMINUTOS;
    this.GENERO=GENERO;
    this.IDIOMAAUDIO=IDIOMAAUDIO;
    this.IDIOMASUB=IDIOMASUB;
    this.SINOPSIS=SINOPSIS;
    this.CLASIFICACION=CLASIFICACION;
    this.PRECIO=PRECIO;
    this.HORAINICIO=HORAINICIO;
    this.FECHA=FECHA;
    this.MINUTOINICIO=MINUTOINICIO;
    this.ASIENTOS=ASIENTOS;
    this.IMAGEN=IMAGEN;
    this.ESTADO=ESTADO;
   }
Guardar() {
   var objetoaenviar = this;
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff      
      try {           
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/Nuevapelicula');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));             
}
catch(err) {
     reject(err.message);
}
    });
}    
 Modificar() {	
       var objetoaenviar = this;
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff      
      try {          
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/Modificapelicula');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));            
}
catch(err) {
     reject(err.message);
}
    });   
}   
    Eliminar() {
       var objetoaenviar = this;
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff       
      try {           
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/Eliminapelicula');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));            
}
catch(err) {
     reject(err.message);
}
    });
}
peliculaspormesyanno(mes,anno)
            {     
       var objetoaenviar = this;
                var vectordepeliculasfiltradas = [];
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff  
      try {
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/seleccionartodos');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        var peliculas =JSON.parse(xhr.responseText);   
        for(var elemento in peliculas)
            {
                var fechadelapelicula = new Date(peliculas[elemento].FECHA);
                if((fechadelapelicula.getMonth()+1 == mes) && (fechadelapelicula.getFullYear() == anno))
                    {
                        vectordepeliculasfiltradas.push(peliculas[elemento]);
                    }      
            }
         resolve(vectordepeliculasfiltradas);    
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));          
}
catch(err) {
     reject(err.message);
}
    });
            }

Seleccionartodos() {	
       var objetoaenviar = this;
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff     
      try {          
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/seleccionarpelicula');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));            
}
catch(err) {
     reject(err.message);
}
    });
} 
    Seleccionarporfecha() {
       var objetoaenviar = this;
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff
      try {        
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/seleccionarporfecha');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));            
}
catch(err) {
     reject(err.message);
}
    });   
} 
    Seleccionarporid(req,res) {
      var objetoaenviar = this;
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff    
      try {
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/seleccionarporid');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));             
}
catch(err) {
     reject(err.message);
}
    });
} 
    Seleccionarpornombre(req,res) {
      var objetoaenviar = this;
  // Return a new promise.
  return new Promise(function(resolve, reject) {
    // Do the usual XHR stuff
      try {          
               var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://localhost:8080/api/seleccionarpornombre');
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onload = function() {
    if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText));
    }
    else
        {
           reject(xhr); 
        }
};
xhr.send(JSON.stringify(objetoaenviar));            
}
catch(err) {
     reject(err.message);
}
    });
}
}
             let imagenenbase64 = "";
      $("#imagen").change(function(){
       readURL(this);
 });
        function readURL(input) {
                    if (input.files && input.files[0]) {
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            imagenenbase64=e.target.result; 
                        }
                        reader.readAsDataURL(input.files[0]);
                    }
                }   
            var asientos = new Object();
            var asientoA1 = new Object();
            asientoA1.NOMBREESTUADIANTE = null;
            asientoA1.SECCION=null;
            asientoA1.CARNET=null;
            asientos.A1= asientoA1;
            
            var asientoA2 = new Object();
            asientoA2.NOMBREESTUADIANTE = null;
            asientoA2.SECCION=null;
            asientoA2.CARNET=null;
            asientos.A2= asientoA2;

            var asientoA3 = new Object();
            asientoA3.NOMBREESTUADIANTE = null;
            asientoA3.SECCION=null;
            asientoA3.CARNET=null;
            asientos.A3= asientoA3;
            
            var asientoA4 = new Object();
            asientoA4.NOMBREESTUADIANTE = null;
            asientoA4.SECCION=null;
            asientoA4.CARNET=null;
            asientos.A4= asientoA4;

            var asientoA5 = new Object();
            asientoA5.NOMBREESTUADIANTE = null;
            asientoA5.SECCION=null;
            asientoA5.CARNET=null;
            asientos.A5= asientoA5;
            
            var asientoA6 = new Object();
            asientoA6.NOMBREESTUADIANTE = null;
            asientoA6.SECCION=null;
            asientoA6.CARNET=null;
            asientos.A6= asientoA6;

            var asientoB1 = new Object();
            asientoB1.NOMBREESTUADIANTE = null;
            asientoB1.SECCION=null;
            asientoB1.CARNET=null;
            asientos.B1= asientoB1;
            
            var asientoB2 = new Object();
            asientoB2.NOMBREESTUADIANTE = null;
            asientoB2.SECCION=null;
            asientoB2.CARNET=null;
            asientos.B2= asientoB2;

            var asientoB3 = new Object();
            asientoB3.NOMBREESTUADIANTE = null;
            asientoB3.SECCION=null;
            asientoB3.CARNET=null;
            asientos.B3= asientoB3;
            
            var asientoB4 = new Object();
            asientoB4.NOMBREESTUADIANTE = null;
            asientoB4.SECCION=null;
            asientoB4.CARNET=null;
            asientos.B4= asientoB4;

            var asientoB5 = new Object();
            asientoB5.NOMBREESTUADIANTE = null;
            asientoB5.SECCION=null;
            asientoB5.CARNET=null;
            asientos.B5= asientoB5;
            
            var asientoB6 = new Object();
            asientoB6.NOMBREESTUADIANTE = null;
            asientoB6.SECCION=null;
            asientoB6.CARNET=null;
            asientos.B6= asientoB6;

            var asientoC1 = new Object();
            asientoC1.NOMBREESTUADIANTE = null;
            asientoC1.SECCION=null;
            asientoC1.CARNET=null;
            asientos.C1= asientoC1;
            
            var asientoC2 = new Object();
            asientoC2.NOMBREESTUADIANTE = null;
            asientoC2.SECCION=null;
            asientoC2.CARNET=null;
            asientos.C2= asientoC2;

            var asientoC3 = new Object();
            asientoC3.NOMBREESTUADIANTE = null;
            asientoC3.SECCION=null;
            asientoC3.CARNET=null;
            asientos.C3= asientoC3;
            
            var asientoC4 = new Object();
            asientoC4.NOMBREESTUADIANTE = null;
            asientoC4.SECCION=null;
            asientoC4.CARNET=null;
            asientos.C4= asientoC4;

            var asientoC5 = new Object();
            asientoC5.NOMBREESTUADIANTE = null;
            asientoC5.SECCION=null;
            asientoC5.CARNET=null;
            asientos.C5= asientoC5;
            
            var asientoC6 = new Object();
            asientoC6.NOMBREESTUADIANTE = null;
            asientoC6.SECCION=null;
            asientoC6.CARNET=null;
            asientos.C6= asientoC6;

            var asientoD1 = new Object();
            asientoD1.NOMBREESTUADIANTE = null;
            asientoD1.SECCION=null;
            asientoD1.CARNET=null;
            asientos.D1= asientoD1;
            
            var asientoD2 = new Object();
            asientoD2.NOMBREESTUADIANTE = null;
            asientoD2.SECCION=null;
            asientoD2.CARNET=null;
            asientos.D2= asientoD2;

            var asientoD3 = new Object();
            asientoD3.NOMBREESTUADIANTE = null;
            asientoD3.SECCION=null;
            asientoD3.CARNET=null;
            asientos.D3= asientoD3;
            
            var asientoD4 = new Object();
            asientoD4.NOMBREESTUADIANTE = null;
            asientoD4.SECCION=null;
            asientoD4.CARNET=null;
            asientos.D4= asientoD4;

            var asientoD5 = new Object();
            asientoD5.NOMBREESTUADIANTE = null;
            asientoD5.SECCION=null;
            asientoD5.CARNET=null;
            asientos.D5= asientoD5;
            
            var asientoE1 = new Object();
            asientoE1.NOMBREESTUADIANTE = null;
            asientoE1.SECCION=null;
            asientoE1.CARNET=null;
            asientos.E1= asientoE1;
            
            var asientoE2 = new Object();
            asientoE2.NOMBREESTUADIANTE = null;
            asientoE2.SECCION=null;
            asientoE2.CARNET=null;
            asientos.E2= asientoE2;

            var asientoE3 = new Object();
            asientoE3.NOMBREESTUADIANTE = null;
            asientoE3.SECCION=null;
            asientoE3.CARNET=null;
            asientos.E3= asientoE3;
            
            var asientoE4 = new Object();
            asientoE4.NOMBREESTUADIANTE = null;
            asientoE4.SECCION=null;
            asientoE4.CARNET=null;
            asientos.E4= asientoE4;

            var asientoF1 = new Object();
            asientoF1.NOMBREESTUADIANTE = null;
            asientoF1.SECCION=null;
            asientoF1.CARNET=null;
            asientos.F1= asientoF1;
            
            var asientoF2 = new Object();
            asientoF2.NOMBREESTUADIANTE = null;
            asientoF2.SECCION=null;
            asientoF2.CARNET=null;
            asientos.F2= asientoF2;

            var asientoF3 = new Object();
            asientoF3.NOMBREESTUADIANTE = null;
            asientoF3.SECCION=null;
            asientoF3.CARNET=null;
            asientos.F3= asientoF3;
            
            var asientoF4 = new Object();
            asientoF4.NOMBREESTUADIANTE = null;
            asientoF4.SECCION=null;
            asientoF4.CARNET=null;
            asientos.E4= asientoF4;

            var asientoG1 = new Object();
            asientoG1.NOMBREESTUADIANTE = null;
            asientoG1.SECCION=null;
            asientoG1.CARNET=null;
            asientos.G1= asientoG1;
            
            var asientoG2 = new Object();
            asientoG2.NOMBREESTUADIANTE = null;
            asientoG2.SECCION=null;
            asientoG2.CARNET=null;
            asientos.G2= asientoG2;

            var asientoG3 = new Object();
            asientoG3.NOMBREESTUADIANTE = null;
            asientoG3.SECCION=null;
            asientoG3.CARNET=null;
            asientos.G3= asientoG3;
            
            var asientoG4 = new Object();
            asientoG4.NOMBREESTUADIANTE = null;
            asientoG4.SECCION=null;
            asientoG4.CARNET=null;
            asientos.G4= asientoG4;

            var asientoG1 = new Object();
            asientoG1.NOMBREESTUADIANTE = null;
            asientoG1.SECCION=null;
            asientoG1.CARNET=null;
            asientos.G1= asientoG1;
            
            var asientoG2 = new Object();
            asientoG2.NOMBREESTUADIANTE = null;
            asientoG2.SECCION=null;
            asientoG2.CARNET=null;
            asientos.G2= asientoG2;

            var asientoG3 = new Object();
            asientoG3.NOMBREESTUADIANTE = null;
            asientoG3.SECCION=null;
            asientoG3.CARNET=null;
            asientos.G3= asientoG3;
            
            var asientoG4 = new Object();
            asientoG4.NOMBREESTUADIANTE = null;
            asientoG4.SECCION=null;
            asientoG4.CARNET=null;
            asientos.G4= asientoG4;
        function botonguardarclick()
            {
                var peliculainstanciada = new _Pelicula(0,
                document.getElementById("Nombre").value,
                 document.getElementById("duracion").value,
                document.getElementById("genero").value,
               document.getElementById("idiomaaudio").value,
                document.getElementById("idiomasub").value,
              document.getElementById("sinopsis").value,
              document.getElementById("clasificacion").value,
              document.getElementById("precio").value,
            document.getElementById("hora").value,
            document.getElementById("fecha").value,
           document.getElementById("minuto").value,
         asientos,
          imagenenbase64,
         document.getElementById("estado").value
                );                                         
                peliculainstanciada.Guardar().then(function(response){
                  console.log("Success!",response);
                    alert("Guardado con éxito");
                }, function(error){console.error("Failed!", error);
                    alert("Error"+error);
              });                                        
                                                        
            }
	</script>

</body>
</html>
